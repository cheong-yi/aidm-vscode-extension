<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taskmaster Dashboard - Expandable List</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1e1e1e;
            color: #cccccc;
            height: 100vh;
            display: flex;
        }

        .sidebar {
            width: 350px;
            background: #252526;
            border-right: 1px solid #3e3e42;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .sidebar-header {
            padding: 8px 16px;
            background: #2d2d30;
            border-bottom: 1px solid #3e3e42;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-icons {
            display: flex;
            gap: 4px;
        }

        .icon {
            width: 16px;
            height: 16px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .icon:hover {
            opacity: 1;
        }

        .sidebar-content {
            flex: 1;
            overflow-y: auto;
        }

        .task-list {
            padding: 0;
        }

        .task-item {
            border-bottom: 1px solid #3e3e42;
            background: #252526;
            transition: background 0.2s;
        }

        .task-item:hover {
            background: #2a2d2e;
        }

        .task-header {
            padding: 12px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 13px;
            user-select: none;
        }

        .task-expand-icon {
            width: 12px;
            height: 12px;
            transition: transform 0.2s;
            flex-shrink: 0;
        }

        .task-item.expanded .task-expand-icon {
            transform: rotate(90deg);
        }

        .task-id {
            font-family: 'Courier New', monospace;
            font-size: 11px;
            background: #3e3e42;
            padding: 2px 6px;
            border-radius: 3px;
            color: #dcdcaa;
            flex-shrink: 0;
            min-width: 35px;
            text-align: center;
        }

        .task-title {
            flex: 1;
            font-weight: 500;
            line-height: 1.3;
        }

        .task-status {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .task-status.not-started {
            background: #4a4a4a;
            color: #cccccc;
        }

        .task-status.in-progress {
            background: #569cd6;
            color: #ffffff;
        }

        .task-status.review {
            background: #dcdcaa;
            color: #1e1e1e;
        }

        .task-status.completed {
            background: #4ec9b0;
            color: #1e1e1e;
        }

        .task-status.blocked {
            background: #f48771;
            color: #1e1e1e;
        }

        .task-details {
            display: none;
            background: #2d2d30;
            border-top: 1px solid #3e3e42;
            padding: 16px;
        }

        .task-item.expanded .task-details {
            display: block;
        }

        .task-description {
            margin-bottom: 16px;
            font-size: 12px;
            line-height: 1.4;
            color: #d4d4d4;
        }

        .task-meta {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .meta-item {
            font-size: 11px;
        }

        .meta-label {
            color: #969696;
            margin-bottom: 2px;
        }

        .meta-value {
            color: #ffffff;
            font-weight: 500;
        }

        .complexity-low {
            color: #4ec9b0;
        }

        .complexity-medium {
            color: #dcdcaa;
        }

        .complexity-high {
            color: #f48771;
        }

        .dependencies {
            margin-bottom: 16px;
        }

        .dependencies-title {
            font-size: 11px;
            color: #969696;
            margin-bottom: 6px;
        }

        .dependency-list {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }

        .dependency-tag {
            background: #3e3e42;
            color: #dcdcaa;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }

        .test-results {
            background: #1e1e1e;
            border: 1px solid #3e3e42;
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 12px;
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .test-title {
            font-size: 11px;
            font-weight: 600;
            color: #ffffff;
        }

        .test-date {
            font-size: 10px;
            color: #969696;
        }

        .test-stats {
            display: flex;
            gap: 16px;
            margin-bottom: 8px;
        }

        .test-stat {
            text-align: center;
        }

        .test-stat-value {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .test-stat-label {
            font-size: 9px;
            color: #969696;
            text-transform: uppercase;
        }

        .test-passed {
            color: #4ec9b0;
        }

        .test-failed {
            color: #f48771;
        }

        .test-total {
            color: #dcdcaa;
        }

        .failures-section {
            margin-top: 12px;
        }

        .failures-header {
            font-size: 10px;
            color: #f48771;
            font-weight: 600;
            margin-bottom: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .failures-list {
            display: none;
            font-size: 10px;
            color: #cccccc;
        }

        .failures-section.expanded .failures-list {
            display: block;
        }

        .failure-item {
            background: #2d2d30;
            border-left: 3px solid #f48771;
            padding: 6px 8px;
            margin-bottom: 4px;
            border-radius: 2px;
        }

        .failure-name {
            font-weight: 500;
            margin-bottom: 2px;
        }

        .failure-message {
            color: #969696;
            font-family: 'Courier New', monospace;
            font-size: 9px;
        }

        .actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .action-btn {
            background: #3e3e42;
            border: none;
            color: #cccccc;
            padding: 6px 12px;
            border-radius: 3px;
            font-size: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .action-btn:hover {
            background: #4a4a4a;
        }

        .action-btn.primary {
            background: #569cd6;
            color: #ffffff;
        }

        .action-btn.primary:hover {
            background: #4a86c7;
        }

        .no-tests {
            font-size: 11px;
            color: #969696;
            font-style: italic;
            text-align: center;
            padding: 8px;
        }

        .task-item.executable .task-header {
            border-left: 3px solid #569cd6;
        }

        .cursor-icon {
            font-size: 12px;
            margin-left: 4px;
        }

        .section-divider {
            height: 1px;
            background: #3e3e42;
            margin: 12px 0;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            TASKMASTER DASHBOARD
            <div class="header-icons">
                <svg class="icon" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                    <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                </svg>
                <svg class="icon" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
                    <path d="M1.5 8a6.5 6.5 0 1 1 13 0 6.5 6.5 0 0 1-13 0z"/>
                </svg>
            </div>
        </div>

        <div class="sidebar-content">
            <div class="task-list">
                <!-- Completed task with test results -->
                <div class="task-item" onclick="toggleTask(this)">
                    <div class="task-header">
                        <svg class="task-expand-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                        </svg>
                        <span class="task-id">1.1</span>
                        <span class="task-title">Create directory structure for task management components</span>
                        <span class="task-status completed">completed</span>
                    </div>
                    <div class="task-details">
                        <div class="task-description">
                            Set up the foundational directory structure for task management components including interfaces, services, and UI components.
                        </div>
                        <div class="task-meta">
                            <div class="meta-item">
                                <div class="meta-label">Complexity</div>
                                <div class="meta-value complexity-low">Low</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">Estimated</div>
                                <div class="meta-value">15-30 min</div>
                            </div>
                        </div>
                        <div class="dependencies">
                            <div class="dependencies-title">Dependencies</div>
                            <div class="dependency-list">
                                <span class="dependency-tag">None</span>
                            </div>
                        </div>
                        <div class="test-results">
                            <div class="test-header">
                                <div class="test-title">Test Results</div>
                                <div class="test-date">Last run: 2 hours ago</div>
                            </div>
                            <div class="test-stats">
                                <div class="test-stat">
                                    <div class="test-stat-value test-total">12</div>
                                    <div class="test-stat-label">Total</div>
                                </div>
                                <div class="test-stat">
                                    <div class="test-stat-value test-passed">12</div>
                                    <div class="test-stat-label">Passed</div>
                                </div>
                                <div class="test-stat">
                                    <div class="test-stat-value test-failed">0</div>
                                    <div class="test-stat-label">Failed</div>
                                </div>
                            </div>
                        </div>
                        <div class="actions">
                            <button class="action-btn">View Code</button>
                            <button class="action-btn">View Tests</button>
                            <button class="action-btn">History</button>
                        </div>
                    </div>
                </div>

                <!-- In progress task -->
                <div class="task-item" onclick="toggleTask(this)">
                    <div class="task-header">
                        <svg class="task-expand-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                        </svg>
                        <span class="task-id">2.4.4</span>
                        <span class="task-title">Add updateTaskStatus method with JSON-RPC</span>
                        <span class="task-status in-progress">in progress</span>
                    </div>
                    <div class="task-details">
                        <div class="task-description">
                            Implement the updateTaskStatus method in TasksDataService to handle task status updates via JSON-RPC communication with the MCP server.
                        </div>
                        <div class="task-meta">
                            <div class="meta-item">
                                <div class="meta-label">Complexity</div>
                                <div class="meta-value complexity-medium">Medium</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">Estimated</div>
                                <div class="meta-value">20-25 min</div>
                            </div>
                        </div>
                        <div class="dependencies">
                            <div class="dependencies-title">Dependencies</div>
                            <div class="dependency-list">
                                <span class="dependency-tag">2.4.2</span>
                                <span class="dependency-tag">2.4.3</span>
                            </div>
                        </div>
                        <div class="no-tests">No tests available yet</div>
                        <div class="actions">
                            <button class="action-btn primary">Continue Work</button>
                            <button class="action-btn">Mark Complete</button>
                            <button class="action-btn">View Dependencies</button>
                        </div>
                    </div>
                </div>

                <!-- Executable not started task -->
                <div class="task-item executable" onclick="toggleTask(this)">
                    <div class="task-header">
                        <svg class="task-expand-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                        </svg>
                        <span class="task-id">3.1.2</span>
                        <span class="task-title">Add TaskTreeItem status indicator property</span>
                        <span class="task-status not-started">not started</span>
                        <span class="cursor-icon">🤖</span>
                    </div>
                    <div class="task-details">
                        <div class="task-description">
                            Add iconPath property with status-based theme icons to TaskTreeItem. Implement logic to assign appropriate icons based on task status.
                        </div>
                        <div class="task-meta">
                            <div class="meta-item">
                                <div class="meta-label">Complexity</div>
                                <div class="meta-value complexity-low">Low</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">Estimated</div>
                                <div class="meta-value">15-20 min</div>
                            </div>
                        </div>
                        <div class="dependencies">
                            <div class="dependencies-title">Dependencies</div>
                            <div class="dependency-list">
                                <span class="dependency-tag">3.1.1</span>
                                <span class="dependency-tag">2.2</span>
                            </div>
                        </div>
                        <div class="no-tests">Ready for implementation</div>
                        <div class="actions">
                            <button class="action-btn primary">🤖 Execute with Cursor</button>
                            <button class="action-btn">Generate Prompt</button>
                            <button class="action-btn">View Requirements</button>
                        </div>
                    </div>
                </div>

                <!-- Completed task with failed tests -->
                <div class="task-item expanded" onclick="toggleTask(this)">
                    <div class="task-header">
                        <svg class="task-expand-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                        </svg>
                        <span class="task-id">2.5.3</span>
                        <span class="task-title">Add tasks/update-status tool to SimpleMCPServer</span>
                        <span class="task-status completed">completed</span>
                    </div>
                    <div class="task-details">
                        <div class="task-description">
                            Implement the tasks/update-status MCP tool in SimpleMCPServer to handle task status update requests from the VSCode extension.
                        </div>
                        <div class="task-meta">
                            <div class="meta-item">
                                <div class="meta-label">Complexity</div>
                                <div class="meta-value complexity-medium">Medium</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">Estimated</div>
                                <div class="meta-value">25-30 min</div>
                            </div>
                        </div>
                        <div class="dependencies">
                            <div class="dependencies-title">Dependencies</div>
                            <div class="dependency-list">
                                <span class="dependency-tag">2.5.1</span>
                                <span class="dependency-tag">2.5.2</span>
                            </div>
                        </div>
                        <div class="test-results">
                            <div class="test-header">
                                <div class="test-title">Test Results</div>
                                <div class="test-date">Last run: 45 minutes ago</div>
                            </div>
                            <div class="test-stats">
                                <div class="test-stat">
                                    <div class="test-stat-value test-total">18</div>
                                    <div class="test-stat-label">Total</div>
                                </div>
                                <div class="test-stat">
                                    <div class="test-stat-value test-passed">15</div>
                                    <div class="test-stat-label">Passed</div>
                                </div>
                                <div class="test-stat">
                                    <div class="test-stat-value test-failed">3</div>
                                    <div class="test-stat-label">Failed</div>
                                </div>
                            </div>
                            <div class="failures-section" onclick="toggleFailures(this, event)">
                                <div class="failures-header">
                                    <svg class="task-expand-icon" viewBox="0 0 16 16" fill="currentColor">
                                        <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                                    </svg>
                                    Failed Tests (3)
                                </div>
                                <div class="failures-list">
                                    <div class="failure-item">
                                        <div class="failure-name">should validate task status transitions</div>
                                        <div class="failure-message">AssertionError: Expected 400 but got 200</div>
                                    </div>
                                    <div class="failure-item">
                                        <div class="failure-name">should handle invalid task IDs</div>
                                        <div class="failure-message">TypeError: Cannot read property 'id' of undefined</div>
                                    </div>
                                    <div class="failure-item">
                                        <div class="failure-name">should persist status changes</div>
                                        <div class="failure-message">FileSystemError: Permission denied</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="section-divider"></div>
                        <div class="actions">
                            <button class="action-btn">Fix Failing Tests</button>
                            <button class="action-btn">View Full Report</button>
                            <button class="action-btn">Rerun Tests</button>
                        </div>
                    </div>
                </div>

                <!-- Review task -->
                <div class="task-item" onclick="toggleTask(this)">
                    <div class="task-header">
                        <svg class="task-expand-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                        </svg>
                        <span class="task-id">3.2.4</span>
                        <span class="task-title">Implement getChildren for root level tasks only</span>
                        <span class="task-status review">review</span>
                    </div>
                    <div class="task-details">
                        <div class="task-description">
                            Return top-level tasks (no parent dependencies) in the getChildren method of TaskTreeViewProvider.
                        </div>
                        <div class="task-meta">
                            <div class="meta-item">
                                <div class="meta-label">Complexity</div>
                                <div class="meta-value complexity-medium">Medium</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">Estimated</div>
                                <div class="meta-value">20-30 min</div>
                            </div>
                        </div>
                        <div class="dependencies">
                            <div class="dependencies-title">Dependencies</div>
                            <div class="dependency-list">
                                <span class="dependency-tag">3.2.3</span>
                                <span class="dependency-tag">1.5</span>
                                <span class="dependency-tag">2.1</span>
                            </div>
                        </div>
                        <div class="test-results">
                            <div class="test-header">
                                <div class="test-title">Test Results</div>
                                <div class="test-date">Last run: 1 hour ago</div>
                            </div>
                            <div class="test-stats">
                                <div class="test-stat">
                                    <div class="test-stat-value test-total">8</div>
                                    <div class="test-stat-label">Total</div>
                                </div>
                                <div class="test-stat">
                                    <div class="test-stat-value test-passed">8</div>
                                    <div class="test-stat-label">Passed</div>
                                </div>
                                <div class="test-stat">
                                    <div class="test-stat-value test-failed">0</div>
                                    <div class="test-stat-label">Failed</div>
                                </div>
                            </div>
                        </div>
                        <div class="actions">
                            <button class="action-btn primary">Approve & Complete</button>
                            <button class="action-btn">Request Changes</button>
                            <button class="action-btn">View Implementation</button>
                        </div>
                    </div>
                </div>

                <!-- Blocked task -->
                <div class="task-item" onclick="toggleTask(this)">
                    <div class="task-header">
                        <svg class="task-expand-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                        </svg>
                        <span class="task-id">4.3.2</span>
                        <span class="task-title">Map task errors to existing error categories</span>
                        <span class="task-status blocked">blocked</span>
                    </div>
                    <div class="task-details">
                        <div class="task-description">
                            Create error mapping for task operations to integrate with the existing ErrorHandler infrastructure.
                        </div>
                        <div class="task-meta">
                            <div class="meta-item">
                                <div class="meta-label">Complexity</div>
                                <div class="meta-value complexity-high">High</div>
                            </div>
                            <div class="meta-item">
                                <div class="meta-label">Estimated</div>
                                <div class="meta-value">45-60 min</div>
                            </div>
                        </div>
                        <div class="dependencies">
                            <div class="dependencies-title">Dependencies</div>
                            <div class="dependency-list">
                                <span class="dependency-tag">4.3.1</span>
                                <span class="dependency-tag">5.1</span>
                                <span class="dependency-tag">5.2</span>
                            </div>
                        </div>
                        <div class="no-tests">Blocked - dependencies not complete</div>
                        <div class="actions">
                            <button class="action-btn">View Blockers</button>
                            <button class="action-btn">Update Dependencies</button>
                            <button class="action-btn">Report Issue</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        function toggleTask(taskElement) {
            const isExpanded = taskElement.classList.contains('expanded');
            
            // Close all other expanded tasks
            document.querySelectorAll('.task-item.expanded').forEach(item => {
                if (item !== taskElement) {
                    item.classList.remove('expanded');
                }
            });
            
            // Toggle current task
            taskElement.classList.toggle('expanded');
        }

        function toggleFailures(failuresElement, event) {
            event.stopPropagation();
            failuresElement.classList.toggle('expanded');
        }
    </script>
</body>
</html>